<!DOCTYPE html>  
<html lang="en">  
<head>  
<meta charset="UTF-8">  
<meta name="viewport" content="width=device-width, initial-scale=1.0">  
<title>Theme Toggle Demo</title>  
  
<style>  
/* =======================================================  
   CUSTOM THEME COLORS  
======================================================= */  
:root {  
  --accent: #f44234;  
  --accent-h: #752020;  
  --accent-soft: #f4423499;  
  --border-c: #ff000033;  
  --border-d: #00808033;  
  --green: #00ff00;  
  --red: #ff0000;  
  --teal: #008080;  
  --white: #ffffff;  
  --border: #333;  
  --panel-bkdrop: blur(12px);  
  --highlight: #ff9800;  
  --muted: #888;  
  --gray-soft: #7d7d7d33;  
  --gray-mid: #83838366;  
  --gray-light: #ffffff66;  
  --text: #000000;  
  --bg: #ffffff;  
  --transulent-bg: #ffffff33;  
  --overlay: #0000001a;  
  --img-invert: invert(1);  
  --shadow-o: 0px 0px 5px 1px #ffffff88;  
  --shadow-h: inset 0 0 6px 1px #00000066;  
  --alert-bg: #b9b9b977;  
  --alert-heading-bg: #fdfdfd;  
  --alert-heading: #000;  
}  
  
/* Dark Theme */  
html.dark {  
  --text: #ffffff;  
  --bg: #222;  
  --transulent-bg: #1c1c2233;  
  --overlay: #00000033;  
  --img-invert: invert(0);  
  --shadow-o: 0px 0px 6px 2px #00000066;  
  --shadow-h: inset 0 0 5px 0 #ffffff88;  
  --alert-bg: #0009;  
  --alert-heading-bg: #343434;  
  --alert-heading: #ffffff;  
}  
  
/* =======================================================  
   PAGE STYLE  
======================================================= */  
body {  
  background: var(--bg);  
  color: var(--text);  
  font-family: sans-serif;  
  margin: 0;  
  padding: 20px;  
  transition: background 0.3s, color 0.3s;  
}  
  
.box {  
  padding: 20px;  
  margin-top: 30px;  
  background: var(--transulent-bg);  
  border-radius: 12px;  
  box-shadow: var(--shadow-h);  
  backdrop-filter: var(--panel-bkdrop);  
}  
  
/* =======================================================  
   THEME TOGGLE SWITCH  
======================================================= */  
.switch {  
  font-size: 17px;  
  position: relative;  
  display: inline-block;  
  width: 4em;  
  height: 2.2em;  
  border-radius: 30px;  
  box-shadow: 0 0 10px rgba(0,0,0,0.1);  
}  
  
.switch input {  
  opacity: 0;  
  width: 0;  
  height: 0;  
}  
  
.slider {  
  position: absolute;  
  cursor: pointer;  
  top: 0; left: 0; right: 0; bottom: 0;  
  background-color: #3c3c3c;  
  transition: 0.4s;  
  border-radius: 30px;  
  overflow: hidden;  
}  
  
.slider:before {  
  position: absolute;  
  content: "";  
  height: 1.2em;  
  width: 1.2em;  
  border-radius: 20px;  
  left: 0.5em;  
  bottom: 0.5em;  
  transition: 0.4s;  
  transition-timing-function: cubic-bezier(0.81,-0.04,0.38,1.5);  
  box-shadow: inset 4px -3px 4px 0px #ffcf48;  
}  
  
.switch input:checked + .slider {  
  background-color: #00a6ff;  
}  
  
.switch input:checked + .slider:before {  
  transform: translateX(1.8em);  
  box-shadow: inset 15px -3px 5px 15px #ffcc00;  
}  
  
.star {  
  position: absolute;  
  width: 5px;  
  height: 5px;  
  transition: all 0.4s;  
  left: 2.5em; top: .5em;   
}  
  
.switch input:checked ~ .slider .star.star_1 {  
  opacity: 0;  
}  
  
.cloud {  
  width: 3.5em;  
  position: absolute;  
  bottom: -1.4em;  
  left: -1.1em;  
  opacity: 0;  
  transition: all 0.4s;  
}  
  
.switch input:checked ~ .slider .cloud {  
  opacity: 1;  
}  
</style>  
</head>  
  
<body>  
  
<label class="switch">  
  <input id="themeToggle" type="checkbox">  
  <span class="slider">  
    <div class="star star_1">✨✨</div>  
    <svg viewBox="0 0 16 16" class="cloud_1 cloud">  
      <path transform="matrix(.77976 0 0 .78395-299.99-418.63)"  
        fill="#fff"  
        d="m391.84 540.91c-.421-.329-.949-.524-1.523-.524-1.351 0-2.451 1.084-2.485 2.435-1.395.526-2.388 1.88-2.388 3.466 0 1.874 1.385 3.423 3.182 3.667v.034h12.73v-.006c1.775-.104 3.182-1.584 3.182-3.395 0-1.747-1.309-3.186-2.994-3.379.007-.106.011-.214.011-.322 0-2.707-2.271-4.901-5.072-4.901-2.073 0-3.856 1.202-4.643 2.925" />  
    </svg>  
  </span>  
</label>  
  
<div class="box">  
  <h2>My Website</h2>  
  <p>This page uses your custom theme and remembers settings.</p>  
</div>  
  
<script>  
/* =======================================================  
   FIXED THEME LOGIC (100% Persistent)  
======================================================= */  
const toggle = document.getElementById("themeToggle");  
  
function applyTheme(theme) {  
    if (theme === "dark") {  
        document.documentElement.classList.add("dark");  
        toggle.checked = false;  
    } else {  
        document.documentElement.classList.remove("dark");  
        toggle.checked = true;  
    }  
}  
  
// Load saved theme  
let saved = localStorage.getItem("theme");  
  
if (saved) {  
    applyTheme(saved);  
} else {  
    // Follow system on first visit  
    if (window.matchMedia("(prefers-color-scheme: dark)").matches) {  
        applyTheme("dark");  
    } else {  
        applyTheme("light");  
    }  
}  
  
// When user toggles  
toggle.addEventListener("change", function () {  
    if (this.checked) {  
        applyTheme("light");  
        localStorage.setItem("theme", "light");  
    } else {  
        applyTheme("dark");  
        localStorage.setItem("theme", "dark");  
    }  
});  
</script>  
  
</body>  
</html>